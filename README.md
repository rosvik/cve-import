# cve-import

A tool to import CVE records to a database from json files. CVE JSON files are fetched from [CVEProject/cvelistV5](https://github.com/CVEProject/cvelistV5).

## Setup

- Clone the repo and install packages with `yarn`
- Copy `.env.sample` to `.env`, and enter your Postgres credentials.
- Run `npx prisma migrate deploy` to apply the prisma schema to you database.
- Run `./scripts/get-cvelist.sh` to fetch the [cvelist](https://github.com/CVEProject/cvelist) repository.

## Updating database schema

- Run `npx prisma migrate dev`
- Check status with `npx prisma migrate status`

## Populating database

```bash
yarn build-db
```

## Generating types

Install [json-schema-to-typescript](https://www.npmjs.com/package/json-schema-to-typescript)

```
npm install -g json-schema-to-typescript
```

Then run

```bash
./scripts/generate-types.sh
```
