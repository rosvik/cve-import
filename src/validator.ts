import ajv from "ajv";

import { v4Metaschema } from "./schemas/v4-metaschema";

import { v4SchemaReserved } from "./schemas/v4-schema-reserved";
import { v4SchemaPublic } from "./schemas/v4-schema-public";
import { v4SchemaReject } from "./schemas/v4-schema-reject";

// import { v5Metaschema } from "./schemas/v5-metaschema";
import { v5Schema } from "./schemas/v5-schema";

export function validator(
  version: "v5" | "v4-reserved" | "v4-public" | "v4-reject"
) {
  const Ajv = new ajv();

  // Ajv.addMetaSchema(v5Metaschema);
  Ajv.addMetaSchema(v4Metaschema);

  switch (version) {
    case "v5":
      return Ajv.compile(v5Schema);
    case "v4-reserved":
      return Ajv.compile(v4SchemaReserved);
    case "v4-public":
      return Ajv.compile(v4SchemaPublic);
    case "v4-reject":
      return Ajv.compile(v4SchemaReject);
  }
}
